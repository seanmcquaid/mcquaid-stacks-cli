(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[358],{991:function(t,e,s){Promise.resolve().then(s.bind(s,2278))},2278:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return R}});var i=s(6730),r=s(4349),n=s(1726),a=s(5121),o=s.n(a),u=s(1140),c=t=>(0,i.jsx)(o(),{...t,className:(0,u.cn)((0,n.d)({variant:t.variant,size:t.size,className:t.className})),children:t.children}),h=s(2506),l=s(4619),d=s(1445),p=s(8889),f=s(3872),m=s(835),v=s(2032),y=class extends m.l{#t;#e=void 0;#s;#i;constructor(t,e){super(),this.#t=t,this.setOptions(e),this.bindMethods(),this.#r()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){let e=this.options;this.options=this.#t.defaultMutationOptions(t),(0,v.VS)(this.options,e)||this.#t.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),e?.mutationKey&&this.options.mutationKey&&(0,v.Ym)(e.mutationKey)!==(0,v.Ym)(this.options.mutationKey)?this.reset():this.#s?.state.status==="pending"&&this.#s.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(t){this.#r(),this.#n(t)}getCurrentResult(){return this.#e}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#r(),this.#n()}mutate(t,e){return this.#i=e,this.#s?.removeObserver(this),this.#s=this.#t.getMutationCache().build(this.#t,this.options),this.#s.addObserver(this),this.#s.execute(t)}#r(){let t=this.#s?.state??(0,p.R)();this.#e={...t,isPending:"pending"===t.status,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset}}#n(t){f.V.batch(()=>{if(this.#i&&this.hasListeners()){let e=this.#e.variables,s=this.#e.context;t?.type==="success"?(this.#i.onSuccess?.(t.data,e,s),this.#i.onSettled?.(t.data,null,e,s)):t?.type==="error"&&(this.#i.onError?.(t.error,e,s),this.#i.onSettled?.(void 0,t.error,e,s))}this.listeners.forEach(t=>{t(this.#e)})})}},g=s(1864),b=s(7867),x=s(8997),S=s(656),O=()=>{let t=(0,l.NL)(),{toast:e}=(0,S.pm)();return function(t,e){let s=(0,l.NL)(void 0),[i]=d.useState(()=>new y(s,t));d.useEffect(()=>{i.setOptions(t)},[i,t]);let r=d.useSyncExternalStore(d.useCallback(t=>i.subscribe(f.V.batchCalls(t)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),n=d.useCallback((t,e)=>{i.mutate(t,e).catch(g.Z)},[i]);if(r.error&&(0,g.L)(i.options.throwOnError,[r.error]))throw r.error;return{...r,mutate:n,mutateAsync:r.mutate}}({mutationFn:async t=>b.Z.deletePost(t),onSuccess:()=>{t.invalidateQueries({queryKey:[x.Z.GET_POSTS]}),e({title:"I got deleted"})}})},T=s(4109);let C=()=>({queryKey:[x.Z.GET_POSTS],queryFn:()=>b.Z.getPosts()});var E=t=>(0,T.a)({...C(),initialData:t}),R=()=>{let{t}=(0,h.Z)(),{data:e,isLoading:s,isError:a}=E(),{mutate:o,isPending:u}=O();return(0,i.jsxs)(r.Z,{isLoading:s,isError:a,children:[(0,i.jsx)("h1",{children:t("ReactQueryPage.title")}),(0,i.jsx)("ul",{className:"grid grid-cols-2",children:null==e?void 0:e.map(e=>(0,i.jsxs)("li",{className:"flex mt-4 items-center",children:[e.title.substring(0,5),(0,i.jsx)(n.z,{onClick:()=>o(e.id.toString()),disabled:u,className:"ml-4",children:t("ReactQueryPage.delete")}),(0,i.jsx)(c,{href:"".concat(t("Routes.reactQuery"),"/").concat(e.id),className:"ml-4",children:t("ReactQueryPage.view")})]},e.id))})]})}},1130:function(t,e,s){"use strict";var i=s(6730),r=s(6352),n=s(1726),a=s(2506);e.default=t=>{let{errorText:e,titleText:s}=t,{t:o}=(0,a.Z)(),u=(0,r.useRouter)();return(0,i.jsxs)("div",{className:"flex h-full w-full p-8 flex-col",children:[(0,i.jsx)("h1",{children:s||o("PageError.title")}),!!e&&(0,i.jsx)("p",{children:e}),(0,i.jsx)(n.z,{onClick:()=>{u.back()},children:o("PageError.goBack")})]})}},4349:function(t,e,s){"use strict";s.d(e,{Z:function(){return o}});var i=s(6730),r=s(1130),n=s(7468),a=()=>(0,i.jsx)(n.Z,{className:"animate-spin"}),o=t=>{let{children:e,isLoading:s,isError:n,errorText:o,errorTitleText:u}=t;return s?(0,i.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,i.jsx)(a,{})}):n?(0,i.jsx)(r.default,{errorText:o,titleText:u}):(0,i.jsx)("div",{className:"flex h-full w-full p-8 flex-col",children:e})}},1726:function(t,e,s){"use strict";s.d(e,{d:function(){return u},z:function(){return c}});var i=s(6730),r=s(1445),n=s(4964),a=s(9960),o=s(1140);let u=(0,a.j)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=r.forwardRef((t,e)=>{let{className:s,variant:r,size:a,asChild:c=!1,...h}=t,l=c?n.g7:"button";return(0,i.jsx)(l,{className:(0,o.cn)(u({variant:r,size:a,className:s})),ref:e,...h})});c.displayName="Button"},8997:function(t,e){"use strict";e.Z={GET_POST:"getPost",GET_POSTS:"getPosts"}},2506:function(t,e,s){"use strict";var i=s(3165);e.Z=()=>{let{t,i18n:e}=(0,i.$G)();return{t:(e,s)=>t(e,null!=s?s:{}),i18n:e}}},656:function(t,e,s){"use strict";s.d(e,{pm:function(){return d}});var i=s(1445);let r=0,n=new Map,a=t=>{if(n.has(t))return;let e=setTimeout(()=>{n.delete(t),h({type:"REMOVE_TOAST",toastId:t})},1e6);n.set(t,e)},o=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,1)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{let{toastId:s}=e;return s?a(s):t.toasts.forEach(t=>{let{id:e}=t;a(e)}),{...t,toasts:t.toasts.map(t=>t.id===s||void 0===s?{...t,open:!1}:t)}}case"REMOVE_TOAST":if(void 0===e.toastId)return{...t,toasts:[]};return{...t,toasts:t.toasts.filter(t=>t.id!==e.toastId)}}},u=[],c={toasts:[]};function h(t){c=o(c,t),u.forEach(t=>{t(c)})}function l(t){let{...e}=t,s=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),i=()=>h({type:"DISMISS_TOAST",toastId:s});return h({type:"ADD_TOAST",toast:{...e,id:s,open:!0,onOpenChange:t=>{t||i()}}}),{id:s,dismiss:i,update:t=>h({type:"UPDATE_TOAST",toast:{...t,id:s}})}}function d(){let[t,e]=i.useState(c);return i.useEffect(()=>(u.push(e),()=>{let t=u.indexOf(e);t>-1&&u.splice(t,1)}),[t]),{...t,toast:l,dismiss:t=>h({type:"DISMISS_TOAST",toastId:t})}}},7867:function(t,e,s){"use strict";let i;s.d(e,{Z:function(){return u}});var r=s(4101),n=s(2065);let a=r.z.object({userId:r.z.number(),id:r.z.number(),title:r.z.string(),body:r.z.string()}),o=(i="https://jsonplaceholder.typicode.com",n.ZP.create({prefixUrl:i,retry:{limit:2,statusCodes:[401,403,500,504],methods:["get","put","head","delete","options","trace","post","patch"]},hooks:{afterResponse:[async(t,e,s)=>{if(!s.ok||!e.validationSchema)return s;let i=await s.json(),r=e.validationSchema.safeParse(i);return r.success?new Response(JSON.stringify(r.data)):new Response(JSON.stringify({validationErrors:r.error}),{status:422,statusText:"API Validation Error"})}],beforeError:[async t=>{try{let e=await t.response.json();return t.responseData=e,t}catch(e){return t}}]}}));var u={getPosts:()=>o.get("posts",{validationSchema:r.z.array(a)}).json(),getPost:t=>o.get("posts/".concat(t),{validationSchema:a}).json(),deletePost:t=>o.delete("posts/".concat(t))}},1140:function(t,e,s){"use strict";s.d(e,{cn:function(){return n}});var i=s(5807),r=s(9856);function n(){for(var t=arguments.length,e=Array(t),s=0;s<t;s++)e[s]=arguments[s];return(0,r.m6)((0,i.W)(e))}},8889:function(t,e,s){"use strict";s.d(e,{R:function(){return o},m:function(){return a}});var i=s(3872),r=s(6524),n=s(8920),a=class extends r.F{#a;#o;#u;constructor(t){super(),this.mutationId=t.mutationId,this.#o=t.mutationCache,this.#a=[],this.state=t.state||o(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#a.includes(t)||(this.#a.push(t),this.clearGcTimeout(),this.#o.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#a=this.#a.filter(e=>e!==t),this.scheduleGc(),this.#o.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#a.length||("pending"===this.state.status?this.scheduleGc():this.#o.remove(this))}continue(){return this.#u?.continue()??this.execute(this.state.variables)}async execute(t){this.#u=(0,n.Mz)({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(Error("No mutationFn found")),onFail:(t,e)=>{this.#c({type:"failed",failureCount:t,error:e})},onPause:()=>{this.#c({type:"pause"})},onContinue:()=>{this.#c({type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#o.canRun(this)});let e="pending"===this.state.status,s=!this.#u.canStart();try{if(!e){this.#c({type:"pending",variables:t,isPaused:s}),await this.#o.config.onMutate?.(t,this);let e=await this.options.onMutate?.(t);e!==this.state.context&&this.#c({type:"pending",context:e,variables:t,isPaused:s})}let i=await this.#u.start();return await this.#o.config.onSuccess?.(i,t,this.state.context,this),await this.options.onSuccess?.(i,t,this.state.context),await this.#o.config.onSettled?.(i,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(i,null,t,this.state.context),this.#c({type:"success",data:i}),i}catch(e){try{throw await this.#o.config.onError?.(e,t,this.state.context,this),await this.options.onError?.(e,t,this.state.context),await this.#o.config.onSettled?.(void 0,e,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,e,t,this.state.context),e}finally{this.#c({type:"error",error:e})}}finally{this.#o.runNext(this)}}#c(t){this.state=(e=>{switch(t.type){case"failed":return{...e,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...e,isPaused:!0};case"continue":return{...e,isPaused:!1};case"pending":return{...e,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...e,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...e,data:void 0,error:t.error,failureCount:e.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}})(this.state),i.V.batch(()=>{this.#a.forEach(e=>{e.onMutationUpdate(t)}),this.#o.notify({mutation:this,type:"updated",action:t})})}};function o(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}}},function(t){t.O(0,[190,165,101,121,764,181,418,68,744],function(){return t(t.s=991)}),_N_E=t.O()}]);